{% extends 'base.html' %}  
{% block content %}

  {% load cart %}

    <div class="contain text-center w-max  mt-2 p-1 ">
      <div class="row mx-auto "   >

        <div class="dropdown ">
          <button class="btn btn-success  dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="border-radius:1px;">
            CATEGORIES 
          </button>
          <ul class="dropdown-menu dropdown-menu-white" >
            <li><a href="?"  class="dropdown-item w-75 text-center " >All Items</a></li>
            <hr>
            {% for i in catogereis %}
            <li><a href="?categories={{i.id}}"  class="dropdown-item " >{{i.id}} . {{i.name}}</a></li>
            {% endfor %}
          </ul>
        </div>
 </div>
    </div>


    
  
    <div class="container  ">
      <div class="row">
            {% for i in product %}
            <div class=" col-lg-3 col-6 p-1 pl-1  ">
              <div class="mb-2 p-2 card  rounded border rouded-3  " id="{{i.id}}" width="12rem" >
                <img src="{{i.image.url}}" class="card-img-top mx-auto text-center m-3" style="width: 7rem;" alt="..." > 
                <div class="card-body">
                  <p class=" h6 card-title larg mt-1 small">{{i.name}}</p>
                    <p class="small"><span>&#8377;</span>{{i.price}}&emsp;<del class=" disabled text-secondary"><span>&#8377;</span>{{i.discount}}</del>&emsp;<b class="text-success">%2 off</b></p>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star"></span>
                    <span class="fa fa-star"></span>
                    <p class="small">
                    {{i.desc}}
                    </p>
                </div>



                <div class="card-footer bg-white p-2">
                  {% if i|check_cart:request.session.cart %}
                  <div class="row no-gutters p-0" >

                    <form action="/product/#{{i.id}}" class="col-2 p-0" method="post">
                      {% csrf_token %}
                      <input name="product" hidden type="text" value='{{i.id}}' />
                      <input type="text" hidden name="remove" class="p-0" value="true">                       
                      <input type="submit"  value="-" class="col-2 btn  btn-success text-white">                       
                    </form>

                  <input name="product" hidden type="text" value='{{i.id}}' />
                      <div class="text-center col pt-2 "><stronge>{{i|check_count:request.session.cart }}</stronge></div>

                      <form action="/product/#{{i.id}}" class="col-2 p-0" method="post">
                      {% csrf_token %}
                      <input name="product" hidden type="text" value='{{i.id}}' />
                      <input type="submit" value="+" class=" btn   btn-success text-white">
                       
                      </form>

                    </div>
                  {% else %}
                  <form action="/product/#{{i.id}}" method="POST" class="btn-block p-0">
                    {% csrf_token %}
                  <input name="product" hidden type="text" value='{{i.id}}' />
                  <input type="submit"  class="btn  border-rounded border-opacity-75 bg-success rounded-5 shadow  w-100 text-white" name="cart" style="height:2rem;font-size: small;height: auto; "  value="Add to Cart" />
  
                  </form>
                    {% endif %}
                </div>
                
           </div>
          </div> 
          
           {% endfor %}

          
           
</div>  
<script src="https://cdn.lordicon.com/pzdvqjsp.js"></script>
{% endblock %}